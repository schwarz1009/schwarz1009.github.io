<!DOCTYPE html>
<html dir="ltr" lang="ja">
    <head>
        <title>Debian３（Deb/Dpkg） - from Assy</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="keywords" content="Assy,アッシー,詩,小説,物語,歴史,政治,経済,コンピュータ,パソコン,Linux,エッセイ,散文,哲学">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="../../css/style.css">


<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="manifest" href="/favicons/manifest.json">
<link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5">
<meta name="theme-color" content="#ffffff">

    </head>
    <body>
<div class="page">
<script type="text/javascript" src="../../js/jquery.min.js"></script>
<script type="text/javascript" src="../../js/script_smartmenus.js"></script>
<script type="text/javascript" src="../../js/links2.js"></script>

<p><a href="index.html">Linuxの世界観に戻る</a></p>
<div class="sidebar">
<iframe src="../../menus/linux_distro_menu.html" class="sideiframe"></iframe>
</div>
<h1>Debian３（Deb/Dpkg）</h1>
<p>Debianに関する世界観３（Deb/Dpkg）です。</p>

<h2>関連ページ</h2>
<ul class="defaultlist list6 menu_list">
<li><a href="debian.html">Debian（１．Debian GNU/Linux）</a></li>
<ul>
<li><a href="debian_apt.html">２．Apt</a></li>
<li><b>３．Deb/Dpkg</b></li>
</ul>
</ul>

<div id="toc"></div>
<div class="page_links">


<h1>Dpkg</h1>
<h2>Dpkg</h2>
<p>Debianのパッケージ管理システム。低レベルなDebパッケージのインストール管理を行う。</p>
<p>以下を参照のこと。</p>
<ul>
<li><a href="https://debian-handbook.info/browse/ja-JP/stable/sect.manipulating-packages-with-dpkg.html">5.4. dpkg を用いたパッケージの操作 - Debian</a></li>
</ul>

<h2>debパッケージのコマンド</h2>
<p>パッケージをインストールするには以下のコマンドを使う。
<pre>
dpkg -i [パッケージファイル名]
</pre>
<p>削除するには以下のようにする。</p>
<pre>
dpkg -r [パッケージ名]
</pre>
<p>パッケージの情報を表示するには以下のようにする。</p>
<pre>
dpkg -p [パッケージ名]
</pre>
<p>そのパッケージによってインストールされたファイル一覧の表示は以下のようにする。</p>
<pre>
dpkg -L [パッケージ名]
</pre>
<p>また、Debアーカイブの情報を表示するには-I、Debアーカイブの中身のファイルを表示するには-cを用いる。</p>
<pre>
dpkg -I [パッケージファイル名]
dpkg -c [パッケージファイル名]
</pre>
<p>また、-lでパターンを指定した場合、パターンに一致するパッケージの一覧が表示できる。何も指定しない場合はインストールされているすべてのパッケージ一覧が表示できる。</p>
<pre>
dpkg -l [パターン]
</pre>
<p>（そのほかにもたくさんのコマンドがあるので、<a href="https://eng-entrance.com/linux-package-dpkg">debファイルを扱うdpkgコマンドの使い方を簡単解説 - エンジニアの入り口</a>を参照のこと。）</p>

<h2>Debパッケージとcontrolファイル</h2>
<p>controlファイルはRPMで言うspecファイルに相当する。</p>
<p>以下を参照のこと。</p>
<ul>
<li><a href="https://debian-handbook.info/browse/ja-JP/stable/sect.package-meta-information.html">5.2. パッケージのメタ情報 - Debian</a></li>
</ul>

<h2>ソースパッケージ</h2>
<p>.dsc、.orig.tar.gz、.debian.tar.gz (または .diff.gz) の3つのファイルで構成される。</p>
<p>以下を参照のこと。</p>
<ul>
<li><a href="https://debian-handbook.info/browse/ja-JP/stable/sect.source-package-structure.html">5.3. ソースパッケージの構造 - Debian</a></li>
</ul>

<h2>配布ファイル一覧</h2>
<p>Debian公式ではないが、<a href="https://pureos.net/">PureOS</a>（GNU推奨のディストリビューション）のようなDebian派生ディストリビューションの<a href="http://repo.pureos.net/pureos/pool/main/">リポジトリ</a>では、</p>
<p>(1) .dscファイル</p>
<p>(2) .orig.tar.gzファイル（オリジナルのtarball）</p>
<p>(3) .debian.tar.xzファイル（あるいはdiffか）</p>
<p>(4) バイナリのamd64.debファイル</p>
<p>(5) バイナリのarm64.debファイル</p>
<p>(6) PGP署名
<p>などがリポジトリで配布されている。</p>
<p>サードパーティが再配布をしているのは、Windowsから見ると無駄に思えるかもしれないが、ディストリビューションとして簡単にインストールできる形で配布されていて、最初から利用可能なのは結構嬉しい。Windowsでも同じようにオープンソースでパッケージを再配布してほしいぐらいだ。（Windowsのフリーソフトは、ダウンロードやインストールの過程で地雷を踏むのが怖い。）</p>
<p>Debianのパッケージはコマンド一つで簡単に最新版にアップデートできるが、これは結構怖い（いつ動かなくなるか分からない）ので注意が必要。特にDebianはstableではなくtestingやsidを使っている人が結構多いので、そういう場合はメインOSとして使う以外に遊び・実験用としてもう一つOSを入れることをおすすめする。（Debianの場合はまだマシである。メインマシンでUbuntuやFedoraなんか使っていると、もうありえないだけである。）</p>

<h2>debパッケージを自分で作る方法</h2>
<!--
<p>以下のリンクが参考になる。</p>
<ul>
<li><a href="https://eng-entrance.com/linux-package-deb-create">debパッケージ作成方法をステップバイステップでまとめました - エンジニアの入り口</a></li>
</ul>
-->
<p>基本的には、</p>
<pre>
# apt install build-essential
</pre>
<p>で開発環境（gcc, makeなど）をインストールをして、</p>
<pre>
$ apt source [パッケージ名]
# apt build-dep [パッケージ名]
</pre>
<p>でソースパッケージとビルドするための関連ツールをインストールする。</p>
<p>パッケージのビルドには、dpkg-buildpackageあるいはdebuild（devscriptsパッケージに含まれる）を使う。</p>
<pre>
$ dpkg-buildpackage -us -uc
</pre>
<p>あるいは、</p>
<pre>
$ debuild -b -us -uc
</pre>
<p>でビルド。署名に関しての作業を省略する場合は-us -ucオプションを付ける。</p>
<p>ソースディレクトリ内に「debian」というディレクトリがあり、この中にパッケージ作成のためのレシピが書いてある。</p>
<table class="some_tables">
<tr><th class="min60">ファイル名</th><th>意味</th></tr>
<tr><td>rules</td><td>makeの書式で、ビルドやインストールの方法を記述する</td></tr>
<tr><td>control</td><td>パッケージの分類・情報と説明文、依存関係など</td></tr>
<tr><td>changelog</td><td>パッケージのリリースごとの変更履歴</td></tr>
<tr><td>copyright</td><td>パッケージの著作権とライセンス</td></tr>
</table>
<p>パッケージの作成：</p>
<pre>
$ debuild -us -uc
</pre>
<p>詳しくは以下のページを参照のこと（上記は以下のページからの引用です）。</p>
<ul>
<li><a href="https://eng-entrance.com/linux-package-deb-create">debパッケージ作成方法をステップバイステップでまとめました - エンジニアの入り口</a></li>
<li><a href="https://qiita.com/tomoyafujita/items/b58a1089ec5d10882184">debian package作成方法 - Qiita</a></li>
</ul>

<h1>debconf</h1>
<h2>debconf</h2>
<p>Debパッケージの設定をしてくれるツール。</p>
<p>debconfはDebianでパッケージの設定をするツール。パッケージ管理システムに統合されている。全てのパッケージで、最初の設定をdebconfで行う。</p>
<p>ncursesのCUI（TUI）の形式の他、GTK+のインターフェースも存在する。</p>
<p>インストールした後で、もう一度設定をやり直したい場合は、</p>
<pre>
dpkg-reconfigure [パッケージ名]
</pre>
<p>と実行する。</p>
<p><a href="ncurses.html">ncurses</a>も参照のこと。</p>

<h2>system-config-* (Red Hat)とdebconf (Debian)</h2>
<p>Red Hat系のLinuxでは、システムのさまざまな設定をするためのGUIのフロントエンドとして、system-config-*というツール群が提供されているが、Debianではパッケージ管理システムにdebconfとして設定機構が統合されている。</p>
<p>debconfでは、パッケージがインストールされた時に、ディストリビューションのインストールと同じインターフェースで、対話的に設定を行うことができる。</p>
<p>初心者にとっては、設定ファイルの配置や記法を覚える必要がないというメリットがあるが、設定した内容がシステムのどこにどのように反映されるのかが分からないというデメリットがあるため、Arch Linuxではこのような設定のためのフロントエンドは用意されていない。</p>
<div class="edit_date">
<p>2023.08.17</p>
</div>

<h1>関連ページ</h1>
<h2>パッケージ管理</h2>
<p><a href="linux_pkgmanagement.html">パッケージ管理</a>、<a href="debian_apt.html">APT</a>、<a href="redhat_rpm.html">RPM</a>などを参照のこと。</p>

<h2>ソースからのインストール</h2>
<p><a href="linux_src_install.html">ソースからのインストール</a>を参照のこと。</p>

<h2>Make/Autotools</h2>
<p><a href="make.html">Make</a>と<a href="autotools.html">Autotools</a>を参照のこと。</p>

<h2>アーカイブ</h2>
<p><a href="linux_filetools_archive.html">Linuxアーカイブ・同期・デバイス処理</a>を参照のこと。</p>


<h1>リンク集</h1>
<h2>DEBパッケージの作成・パッケージ管理システム</h2>
<ul>
<li><a href="https://osdn.jp/magazine/14/01/17/090000">独自のDebパッケージやaptリポジトリを作ってみよう - OSDN</a></li>
</ul>






</div></div> <!--page-->










<script type="text/javascript" src="../../js/jquery.toc.js"></script>
<script type="text/javascript" src="../../js/script.js"></script>
<script type="text/javascript" src="../../js/scriptfortoc.js"></script>
</body>
</html>