<!DOCTYPE html>
<html dir="ltr" lang="ja">
    <head>
        <title>データベース入門 - from Assy</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="keywords" content="Assy,アッシー,詩,小説,物語,歴史,政治,経済,コンピュータ,パソコン,Linux,エッセイ,散文,哲学">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="../../css/style.css">


<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="manifest" href="/favicons/manifest.json">
<link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5">
<meta name="theme-color" content="#ffffff">

    </head>
    <body>
<div class="page">
<script type="text/javascript" src="../../js/jquery.min.js"></script>
<script type="text/javascript" src="../../js/script_smartmenus.js"></script>
<script type="text/javascript" src="../../js/links2.js"></script>

<p><a href="index.html">データベースの世界観に戻る</a></p>
<div class="sidebar">
<iframe src="../../menus/db_menu.html" class="sideiframe"></iframe>
</div>
<h1>データベース入門</h1>
<p>データベース入門です。<a href="db.html">データベース</a>も参照のこと。</p>
<p>「<a href="https://www.amazon.co.jp/dp/4295002666/">徹底攻略 応用情報技術者教科書 平成30年度</a>」と「<a href="https://www.amazon.co.jp/%E4%BB%A4%E5%92%8C05%E5%B9%B4-%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%EF%BC%86%E3%82%AF%E3%83%AC%E3%83%90%E3%83%BC%E6%96%B9%E5%BC%8F%E3%81%A7%E3%82%88%E3%81%8F%E3%82%8F%E3%81%8B%E3%82%8B-%E6%A0%A2%E6%9C%A8%E5%85%88%E7%94%9F%E3%81%AE%E5%9F%BA%E6%9C%AC%E6%83%85%E5%A0%B1%E6%8A%80%E8%A1%93%E8%80%85%E6%95%99%E5%AE%A4-%E6%83%85%E5%A0%B1%E5%87%A6%E7%90%86%E6%8A%80%E8%A1%93%E8%80%85%E8%A9%A6%E9%A8%93-%E6%A0%A2%E6%9C%A8/dp/4297131307">平成18年度 イメージ&クレバー方式でよくわかる栢木先生の基本情報技術者教室 (情報処理技術者試験)</a>」と「<a href="https://www.amazon.co.jp/%E7%9C%9F%E5%9B%B3%E8%A7%A3-%E5%9F%BA%E6%9C%AC%E6%83%85%E5%A0%B1%E6%8A%80%E8%A1%93%E8%80%85-2011%E5%B9%B4%E7%89%88%E2%80%95%E5%88%9D%E6%AD%A9%E3%81%8B%E3%82%89%E5%AD%A6%E3%81%B9%E3%81%A6%E5%90%88%E6%A0%BC%E3%81%A7%E3%81%8D%E3%82%8B-%E7%A6%8F%E5%B6%8B-%E5%AE%8F%E8%A8%93/dp/4532406781">真図解 基本情報技術者 2006年春―初歩から学べて合格できる</a>」と放送大学「情報学へのとびら ('16)」を参考にしています。</p>

<div id="toc"></div>
<div class="page_links">

<h1>リレーションとデータベース設計</h1>
<h2>スキーマ</h2>
<p>スキーマとは、データベースの仕様のこと。</p>
<p>そのデータベースがどのような設計（データ列と行、構造、関連性）で構築されているかを「スキーマ」と呼ぶ。</p>
<p>3層スキーマ構造では、「外部スキーマ」「概念スキーマ」「内部スキーマ」の3層のスキーマが存在する。</p>
<table class="some_tables">
<tr><th class="min60">スキーマ</th><th>説明</th></tr>
<tr><td>外部スキーマ</td><td>ユーザーがプログラムを通じてアクセスするためのスキーマ</td></tr>
<tr><td>内部スキーマ</td><td>データベース管理システムの中で、物理的に保管されるデータベースのスキーマ</td></tr>
<tr><td>概念スキーマ</td><td>外部スキーマと内部スキーマの間にあって、<br>データベース管理者が設計するデータモデル（概念）としてのスキーマ</td></tr>
</table>
<p>（「<a href="https://www.amazon.co.jp/%E7%9C%9F%E5%9B%B3%E8%A7%A3-%E5%9F%BA%E6%9C%AC%E6%83%85%E5%A0%B1%E6%8A%80%E8%A1%93%E8%80%85-2011%E5%B9%B4%E7%89%88%E2%80%95%E5%88%9D%E6%AD%A9%E3%81%8B%E3%82%89%E5%AD%A6%E3%81%B9%E3%81%A6%E5%90%88%E6%A0%BC%E3%81%A7%E3%81%8D%E3%82%8B-%E7%A6%8F%E5%B6%8B-%E5%AE%8F%E8%A8%93/dp/4532406781">真図解 基本情報技術者 2006年春―初歩から学べて合格できる</a>」を参考に執筆しました。）</p>

<h2>リレーション</h2>
<h3>主キーと外部キー</h3>
<p>主キーとは、IDのように行を一位に特定できるカラムのことで、一意制約（同じ値を許容しない）やオートインクリメント（自動的に加算）ができる。</p>
<p>外部キーは、テーブルを結合するために別のテーブルの主キーを含めたカラムのこと。参照制約によって外部キーと主キーの間で不一致が起きないようにすることができる。</p>
<p>主キーと外部キーを使うことで、表と表を自由に結合できる。これを「リレーション」と呼ぶ。</p>
<p>（「<a href="https://www.amazon.co.jp/%E4%BB%A4%E5%92%8C05%E5%B9%B4-%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%EF%BC%86%E3%82%AF%E3%83%AC%E3%83%90%E3%83%BC%E6%96%B9%E5%BC%8F%E3%81%A7%E3%82%88%E3%81%8F%E3%82%8F%E3%81%8B%E3%82%8B-%E6%A0%A2%E6%9C%A8%E5%85%88%E7%94%9F%E3%81%AE%E5%9F%BA%E6%9C%AC%E6%83%85%E5%A0%B1%E6%8A%80%E8%A1%93%E8%80%85%E6%95%99%E5%AE%A4-%E6%83%85%E5%A0%B1%E5%87%A6%E7%90%86%E6%8A%80%E8%A1%93%E8%80%85%E8%A9%A6%E9%A8%93-%E6%A0%A2%E6%9C%A8/dp/4297131307">平成18年度 イメージ&クレバー方式でよくわかる栢木先生の基本情報技術者教室 (情報処理技術者試験)</a>」と放送大学「情報学へのとびら ('16)」を参考に執筆しました。）</p>

<h3>関係演算</h3>
<p>表から新しい表を作り出す操作を関係演算と呼ぶ。</p>
<table class="some_tables">
<tr><th class="min60">演算</th><th>説明</th></tr>
<tr><td>射影</td><td>列を取り出すこと</td></tr>
<tr><td>選択</td><td>行を取り出すこと</td></tr>
<tr><td>結合</td><td>表を結合すること</td></tr>
</table>
<p><a href="db_relation.html">リレーション</a>も参照のこと。</p>
<p>（「<a href="https://www.amazon.co.jp/%E4%BB%A4%E5%92%8C05%E5%B9%B4-%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%EF%BC%86%E3%82%AF%E3%83%AC%E3%83%90%E3%83%BC%E6%96%B9%E5%BC%8F%E3%81%A7%E3%82%88%E3%81%8F%E3%82%8F%E3%81%8B%E3%82%8B-%E6%A0%A2%E6%9C%A8%E5%85%88%E7%94%9F%E3%81%AE%E5%9F%BA%E6%9C%AC%E6%83%85%E5%A0%B1%E6%8A%80%E8%A1%93%E8%80%85%E6%95%99%E5%AE%A4-%E6%83%85%E5%A0%B1%E5%87%A6%E7%90%86%E6%8A%80%E8%A1%93%E8%80%85%E8%A9%A6%E9%A8%93-%E6%A0%A2%E6%9C%A8/dp/4297131307">平成18年度 イメージ&クレバー方式でよくわかる栢木先生の基本情報技術者教室 (情報処理技術者試験)</a>」を参考に執筆しました。）</p>

<h3>制約</h3>
<p>テーブルを変更する際に制約をかけることができる。</p>
<table class="some_tables">
<tr><th class="min60">制約</th><th>説明</th></tr>
<tr><td>参照制約</td><td>外部キーの参照整合性が保持される</td></tr>
<tr><td>一意性制約</td><td>同じカラムに同じ値を複数設定することを許さない</td></tr>
<tr><td>非ナル制約</td><td>NULL値の設定を許さない</td></tr>
<tr><td>主キー制約</td><td>一意性制約と非ナル制約を組み合わせたもの<br>主キーに設定される</td></tr>
<tr><td>ドメイン制約</td><td>データの値それぞれに制約をかける</td></tr>
<tr><td>検査制約</td><td>ドメイン制約のうち、データ範囲などを制限する</td></tr>
</table>
<p>（「<a href="https://www.amazon.co.jp/dp/4295002666/">徹底攻略 応用情報技術者教科書 平成30年度</a>」を参考に執筆しました。）</p>

<h2>候補キーと正規化</h2>
<h3>候補キー</h3>
<p>「何かしらの値に対して何かしらの値が決まる」という関数のような従属性を関数従属と呼ぶ。</p>
<p>候補キーとは、「すべての属性を一意に特定する属性あるいは属性の組で最小のもの」。</p>
<p>候補キーは組や行、タプルなどを識別することのできるキーであり、たとえば(ID, 名前, 性別, 住所, 電話番号, 職業, 給料)などがあればIDと住所と電話番号が候補キー。</p>
<p>非キー属性はキーとはならない属性のこと。</p>
<p>後日注記：属性の組で最小のもの、という意味がどういうことかというと、たとえば市町村を表す(ID, 市町村名, 都道府県名, 人口, 面積)のようなタプルがあったとして、IDでも市町村を特定できるが、市町村名と都道府県名の組み合わせでも市町村を特定できる（市町村名だけでは若干の重複がある）。このため、候補キーはIDあるいは{市町村名, 都道府県名}となる。</p>
<p>（「<a href="https://www.amazon.co.jp/dp/4295002666/">徹底攻略 応用情報技術者教科書 平成30年度</a>」を参考に執筆しました。）</p>

<h3>正規化</h3>
<p>データベースは、データの重複や矛盾を排除するために「正規化」を行って、「正しい規則のもとにテーブルを保持する」ことができる。</p>
<p>非正規形は、何も正規化されていない表のこと。これを、繰り返し項目の排除（第1正規形）、主キーの一部にしか関数従属しないようなテーブルを分割する（第2正規形）、主キーのほかに主従関係がある項目のテーブルを分割する（第3正規形）ことができる。</p>
<p>しかしながら、実際の正規化を行うには、難しい概念を理解する必要があり、このように生易しいものではない。</p>
<p>基本的に、以下のような考え方に基づいてテーブルを分割し、テーブルから冗長な重複項目を排除する。</p>
<table class="some_tables">
<tr><th class="min60">正規形</th><th>説明</th></tr>
<tr><td>非正規形</td><td>何も正規化されていない状態</td></tr>
<tr><td>第1正規形</td><td>ドメインがシンプルであることが条件。<br>データベースの1つの場所の中に、データが1つだけ入っているようにする。</td></tr>
<tr><td>第2正規形</td><td>完全関数従属していることが条件。<br>すべての候補キーにすべての非キー属性が関数従属しているようにする（完全関数従属）。</td></tr>
<tr><td>第3正規形</td><td>推移的関数従属していないことが条件。<br>推移的関数従属とはAからB、BからC、Cから…といったように推移的に関数従属されること。<br>主キーのほかに主従関係がある項目を分割する。</td></tr>
</table>
<p>詳細を理解したい方は「<a href="https://www.amazon.co.jp/dp/4295002666/">徹底攻略 応用情報技術者教科書 平成30年度</a>」に記述されている。</p>
<p>後日注記：基本的に、何度もそのまま同じ項目が繰り返されているのを非正規形、繰り返し項目だけを別のテーブルにしたものを第1正規形、特定のどれかの候補キーにしか関数従属していない属性をテーブルを分割して別のテーブルにし、関数従属が部分的に繰り返されないようにしたものを第2正規形、何かの項目が別の何かの項目に主従関係を持って関数従属している部分をすべて個別のテーブルにしたものを第3正規形だと思えばいい。</p>
<p>（「<a href="https://www.amazon.co.jp/%E4%BB%A4%E5%92%8C05%E5%B9%B4-%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%EF%BC%86%E3%82%AF%E3%83%AC%E3%83%90%E3%83%BC%E6%96%B9%E5%BC%8F%E3%81%A7%E3%82%88%E3%81%8F%E3%82%8F%E3%81%8B%E3%82%8B-%E6%A0%A2%E6%9C%A8%E5%85%88%E7%94%9F%E3%81%AE%E5%9F%BA%E6%9C%AC%E6%83%85%E5%A0%B1%E6%8A%80%E8%A1%93%E8%80%85%E6%95%99%E5%AE%A4-%E6%83%85%E5%A0%B1%E5%87%A6%E7%90%86%E6%8A%80%E8%A1%93%E8%80%85%E8%A9%A6%E9%A8%93-%E6%A0%A2%E6%9C%A8/dp/4297131307">平成18年度 イメージ&クレバー方式でよくわかる栢木先生の基本情報技術者教室 (情報処理技術者試験)</a>」と「<a href="https://www.amazon.co.jp/dp/4295002666/">徹底攻略 応用情報技術者教科書 平成30年度</a>」と「<a href="https://www.amazon.co.jp/%E7%9C%9F%E5%9B%B3%E8%A7%A3-%E5%9F%BA%E6%9C%AC%E6%83%85%E5%A0%B1%E6%8A%80%E8%A1%93%E8%80%85-2011%E5%B9%B4%E7%89%88%E2%80%95%E5%88%9D%E6%AD%A9%E3%81%8B%E3%82%89%E5%AD%A6%E3%81%B9%E3%81%A6%E5%90%88%E6%A0%BC%E3%81%A7%E3%81%8D%E3%82%8B-%E7%A6%8F%E5%B6%8B-%E5%AE%8F%E8%A8%93/dp/4532406781">真図解 基本情報技術者 2006年春―初歩から学べて合格できる</a>」を参考に執筆しました。）</p>
<div class="edit_date">
<p>2023.01.23編集</p>
</div>

<h2>正規形の例</h2>
<p>（「<a href="https://www.amazon.co.jp/%E7%9C%9F%E5%9B%B3%E8%A7%A3-%E5%9F%BA%E6%9C%AC%E6%83%85%E5%A0%B1%E6%8A%80%E8%A1%93%E8%80%85-2011%E5%B9%B4%E7%89%88%E2%80%95%E5%88%9D%E6%AD%A9%E3%81%8B%E3%82%89%E5%AD%A6%E3%81%B9%E3%81%A6%E5%90%88%E6%A0%BC%E3%81%A7%E3%81%8D%E3%82%8B-%E7%A6%8F%E5%B6%8B-%E5%AE%8F%E8%A8%93/dp/4532406781">真図解 基本情報技術者 2006年春―初歩から学べて合格できる</a>」を参考に執筆しました。）</p>

<h3>第1正規形</h3>
<p>第1正規形では、繰り返し項目を排除する。</p>
<table class="some_tables">
<tr><th>番号</th><th>日付</th><th>店コード</th><th>店名</th></tr>
<tr><td>42</td><td>8/14</td><td>SHIBUYA01</td><td>渋谷店</td></tr>
</table>
<table class="some_tables">
<tr><th>番号</th><th>料理名</th><th>価格</th><th>数</th></tr>
<tr><td>42</td><td>とんこつラーメン</td><td>700円</td><td>2</td></tr>
</table>
<!--
<pre>
+----+------+-----------+--------+
|番号| 日付 | 店コード  |  店名  |
+----+------+-----------+--------+
| 42 | 8/14 | SHIBUYA01 | 渋谷店 |
+----+------+-----------+--------+

+----+------------------+-------+----+
|番号|      料理名      |  価格 | 数 |
+----+------------------+-------+----+
| 42 | とんこつラーメン | 700円 |  2 |
+----+------------------+-------+----+
</pre>
-->

<h3>第2正規形</h3>
<p>第2正規形では、部分的な従属関係を排除する。</p>
<table class="some_tables">
<tr><th>番号</th><th>日付</th><th>店コード</th><th>店名</th></tr>
<tr><td>42</td><td>8/14</td><td>SHIBUYA01</td><td>渋谷店</td></tr>
</table>
<table class="some_tables">
<tr><th>番号</th><th>料理名</th><th>数</th></tr>
<tr><td>42</td><td>とんこつラーメン</td><td>2</td></tr>
</table>
<table class="some_tables">
<tr><th>料理名</th><th>価格</th></tr>
<tr><td>とんこつラーメン</td><td>700円</td></tr>
</table>
<!--
<pre>
+----+------+-----------+--------+
|番号| 日付 | 店コード  |  店名  |
+----+------+-----------+--------+
| 42 | 8/14 | SHIBUYA01 | 渋谷店 |
+----+------+-----------+--------+

+----+------------------+----+
|番号|      料理名      | 数 |
+----+------------------+----+
| 42 | とんこつラーメン |  2 |
+----+------------------+----+

+------------------+-------+
|      料理名      |  価格 |
+------------------+-------+
| とんこつラーメン | 700円 |
+------------------+-------+
</pre>
-->

<h3>第3正規形</h3>
<p>第3正規形では、推移的な従属関係を排除する。</p>
<table class="some_tables">
<tr><th>番号</th><th>日付</th><th>店コード</th></tr>
<tr><td>42</td><td>8/14</td><td>SHIBUYA01</td></tr>
</table>
<table class="some_tables">
<tr><th>店コード</th><th>店名</th></tr>
<tr><td>SHIBUYA01</td><td>渋谷店</td></tr>
</table>
<table class="some_tables">
<tr><th>番号</th><th>料理名</th><th>数</th></tr>
<tr><td>42</td><td>とんこつラーメン</td><td>2</td></tr>
</table>
<table class="some_tables">
<tr><th>料理名</th><th>価格</th></tr>
<tr><td>とんこつラーメン</td><td>700円</td></tr>
</table>
<!--
<pre>
+----+------+-----------+
|番号| 日付 | 店コード  |
+----+------+-----------+
| 42 | 8/14 | SHIBUYA01 |
+----+------+-----------+

+-----------+--------+
| 店コード  |  店名  |
+-----------+--------+
| SHIBUYA01 | 渋谷店 |
+-----------+--------+

+----+------------------+----+
|番号|      料理名      | 数 |
+----+------------------+----+
| 42 | とんこつラーメン |  2 |
+----+------------------+----+

+------------------+-------+
|      料理名      |  価格 |
+------------------+-------+
| とんこつラーメン | 700円 |
+------------------+-------+
</pre>
-->

<div class="edit_date">
<p>2023.08.14</p>
<p>2024.05.26編集</p>
</div>

<h2>E-R図</h2>
<p>E-R図 （Entity-Relationship Diagram）は、エンティティ（実体）とリレーションシップ（関連）の関係性を表現した図。</p>
<p>リレーションシップにおける対応関係（カーディナリティ）には以下の4種類がある。</p>
<table class="some_tables">
<tr><th class="min60">リレーションシップ</th><th>説明</th></tr>
<tr><td>1対1</td><td>何かに対して何か</td></tr>
<tr><td>1対多</td><td>何かに対してたくさん</td></tr>
<tr><td>多対1</td><td>たくさんに対して何か</td></tr>
<tr><td>多対多</td><td>たくさんに対してたくさん</td></tr>
</table>
<p>1対多のリレーションシップでは、「1」の側における主キーと、「多」の側における外部キーが一致・適合する。</p>
<p>E-R図をUMLのクラス図にして表すこともある。<a href="../prog_lang/oom.html">オブジェクト指向モデリング</a>も参照のこと。</p>
<p>後日注記：たとえば2ちゃんねるのようにひとつのスレッドにたくさんのレスがついたり、ブログのコメント欄のように記事にたくさんのコメントがついたりする場合、1対多のリレーションがある。このような場合、SQLでは分離したテーブルを外部キーで関連付けてJOINで結合するが、Railsではhas_many（たくさんの子供を持つ）やbelongs_to（ひとつに属する）を用いてテーブル間のリレーションを表すことができる。<a href="../prog_lang/ruby_on_rails.html">Ruby on Rails</a>も参照のこと。</p>
<p>後日注記：E-R図の表記にはさまざまな形態のものがあるが、一例として、実体を四角形、関連をひし形、属性を楕円形で表現し、それぞれの間を実線で結び、1対多の関係なら1 : n、多対多の関係ならm : nのように表記する。</p>
<p>（「<a href="https://www.amazon.co.jp/dp/4295002666/">徹底攻略 応用情報技術者教科書 平成30年度</a>」と放送大学「情報学へのとびら ('16)」を参考に執筆しました。）</p>
<div class="edit_date">
<p>2023.03.26編集</p>
</div>

<h2>インデックス</h2>
<p>インデックスは、データを高速に検索することのできる「索引」。</p>
<p>インデックスがあると、大量にあるデータの検索速度は速くなる。その代わり、データが変更されるたびにインデックスも更新されるため、データの更新頻度が高い時には更新速度が遅くなる。</p>
<p>インデックスのデータ構造として、Bツリー、B*ツリー（Bツリーの派生形）、ビットマップが用いられることが多い。</p>
<p><a href="db_index.html">データベースインデックス</a>も参照のこと。</p>
<p>（「<a href="https://www.amazon.co.jp/%E4%BB%A4%E5%92%8C05%E5%B9%B4-%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%EF%BC%86%E3%82%AF%E3%83%AC%E3%83%90%E3%83%BC%E6%96%B9%E5%BC%8F%E3%81%A7%E3%82%88%E3%81%8F%E3%82%8F%E3%81%8B%E3%82%8B-%E6%A0%A2%E6%9C%A8%E5%85%88%E7%94%9F%E3%81%AE%E5%9F%BA%E6%9C%AC%E6%83%85%E5%A0%B1%E6%8A%80%E8%A1%93%E8%80%85%E6%95%99%E5%AE%A4-%E6%83%85%E5%A0%B1%E5%87%A6%E7%90%86%E6%8A%80%E8%A1%93%E8%80%85%E8%A9%A6%E9%A8%93-%E6%A0%A2%E6%9C%A8/dp/4297131307">平成18年度 イメージ&クレバー方式でよくわかる栢木先生の基本情報技術者教室 (情報処理技術者試験)</a>」と「<a href="https://www.amazon.co.jp/dp/4295002666/">徹底攻略 応用情報技術者教科書 平成30年度</a>」を参考に執筆しました。）</p>

<h1>トランザクションと復旧・排他制御</h1>
<h2>トランザクション</h2>
<h3>トランザクションとは</h3>
<p>データベースの世界では、データベースのひとつにまとまった複数の処理を示すために、トランザクションという用語を多用する。</p>
<p>トランザクションは、ひとつの流れで、途中で終わらずに最後まで完了（コミット）するか、あるいはそのトランザクションが処理される前に戻す（ロールバック）のどちらかでなければならないような不可分の処理のことを言う。</p>
<p>たとえば、誰かの口座から別の人の口座に振り込みを行うような場合、この一連の流れが途中で終わってしまってはいけない。片方だけ処理され（誰かの残高が減る）、片方だけが処理されない（別の人の残高が増えない）となっては絶対にいけない。</p>
<p>（「<a href="https://www.amazon.co.jp/dp/4295002666/">徹底攻略 応用情報技術者教科書 平成30年度</a>」を参考に執筆しました。）</p>

<h3>ACID特性</h3>
<p>トランザクションには、ACID特性という、守らなければならない原則がある。それは、</p>
<table class="some_tables">
<tr><th class="min60">特性</th><th>説明</th></tr>
<tr><td>原子性</td><td>必ず、コミットあるいはロールバックのどちらかの状態になる</td></tr>
<tr><td>一貫性</td><td>コミットが行われる前と、コミットが行われた後で、整合性が保たれる</td></tr>
<tr><td>独立性</td><td>データをなんらかのトランザクションが処理している際に、別のトランザクションでそのデータを処理しない</td></tr>
<tr><td>耐久性</td><td>コミットが完了したデータベースは、障害時にも復旧できる</td></tr>
</table>
<p>（「<a href="https://www.amazon.co.jp/dp/4295002666/">徹底攻略 応用情報技術者教科書 平成30年度</a>」を参考に執筆しました。）</p>


<h2>同時処理の制御</h2>
<p>データベースでは、同じデータに複数のプログラムが同時にアクセスすることがある。この時、排他制御（ロック）をかけないとデータが破損してしまう。</p>
<p>共有ロックは、参照だけを許す代わり、変更は許さないロック。あるトランザクションがデータを参照している状況で、別のトランザクションによってそのデータが変更されないためにかける。</p>
<p>専有ロックは、変更だけではなく参照も許さないロック。あるトランザクションがデータを変更している状況で、別のトランザクションによって異なる時点でのそのデータが参照されないためにかける。</p>
<p>ロックをかける際、頻繁にかけたり外したりを繰り返すのではなく、かけるべき時はずっとかけ続け、外すべき時はずっと外し続けることでデータの矛盾が起きづらくなる。これを「2相ロック」と呼ぶ。</p>
<p><a href="../prog_lang/parallel.html">並列処理</a>も参照のこと。</p>
<p>（「<a href="https://www.amazon.co.jp/dp/4295002666/">徹底攻略 応用情報技術者教科書 平成30年度</a>」を参考に執筆しました。）</p>

<h2>バックアップとデータベース復旧</h2>
<p>データベースのバックアップには、「全体バックアップ」と「差分バックアップ」の二種類がある。</p>
<p>全体バックアップでは、データベースやファイル全体のバックアップを行う。定期的に、毎日・毎週・毎月に一度のような単位で行う。</p>
<p>差分バックアップでは、データベースの変更が逐次的に記述された「ジャーナルファイル」（ログファイルとも呼ばれる）を用いて、差分を含めた最新の状態を復元する。</p>
<p>データベースが破損したりデータが失われた時、データベースを復旧するためには、まず全体バックアップの状態の時点に復旧し、ジャーナルファイルを用いて差分バックアップを復旧させる。この方法を「ロールフォワード」と呼ぶ。</p>
<p>また、データベースのコミット時にシステムが異常終了するなどした場合は、それ以前の状態（コミット前の状態）に復元する。これを「ロールバック」と呼ぶ。
<p>（「<a href="https://www.amazon.co.jp/%E4%BB%A4%E5%92%8C05%E5%B9%B4-%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%EF%BC%86%E3%82%AF%E3%83%AC%E3%83%90%E3%83%BC%E6%96%B9%E5%BC%8F%E3%81%A7%E3%82%88%E3%81%8F%E3%82%8F%E3%81%8B%E3%82%8B-%E6%A0%A2%E6%9C%A8%E5%85%88%E7%94%9F%E3%81%AE%E5%9F%BA%E6%9C%AC%E6%83%85%E5%A0%B1%E6%8A%80%E8%A1%93%E8%80%85%E6%95%99%E5%AE%A4-%E6%83%85%E5%A0%B1%E5%87%A6%E7%90%86%E6%8A%80%E8%A1%93%E8%80%85%E8%A9%A6%E9%A8%93-%E6%A0%A2%E6%9C%A8/dp/4297131307">平成18年度 イメージ&クレバー方式でよくわかる栢木先生の基本情報技術者教室 (情報処理技術者試験)</a>」を参考に執筆しました。）</p>

<h1>セキュリティ</h1>
<h2>データベースセキュリティ</h2>
<p>データベースでは、セキュリティも重要。利用者認証や暗号化のほか、アカウントにユーザーだけではなくロール（役割）を設定し、ロールごとにアクセスを制御することができる。</p>
<p><a href="../network/security.html">セキュリティ</a>も参照のこと。</p>
<p>（「<a href="https://www.amazon.co.jp/dp/4295002666/">徹底攻略 応用情報技術者教科書 平成30年度</a>」を参考に執筆しました。）</p>

<h1>分散DB・クラスタ</h1>
<h2>分散データベース</h2>
<p>分散データベースは、さまざまな場所に分散したデータベースをひとつのデータベースとして扱うことのできるデータベースのこと。</p>
<p>ネットワーク上のさまざまな場所にデータベースが点在・分散し、ひとつのデータベース管理システムがこれらのデータベースを管理し、全体がひとつのデータベースであるかのようにアクセスすることができる。</p>
<p>ひとつに障害が起きてもそれ以外に影響を与えないため、耐障害性の向上になる。また、それぞれのデータベースに負荷も分散し、アクセス速度も向上が期待できる。</p>
<ul>
<li><a href="https://mypage.otsuka-shokai.co.jp/contents/business-oyakudachi/words/distributed-database.html">分散データベース｜大塚商会</a></li>
<li><a href="https://atmarkit.itmedia.co.jp/ait/articles/1703/01/news203.html">「分散データベース」を理解する：「データベーススペシャリスト試験」戦略的学習のススメ（30）（1/2 ページ） - ＠IT</a></li>
</ul>
<div class="edit_date">
<p>2023.05.12</p>
</div>

<h2>データベースはクラスタ化する</h2>
<p>僕も全然詳しくありませんが、データベースはクラスタ化して、大規模化します。</p>
<p>すなわち、CPUがひとつだけの小さなサーバーでデータベースを使うということは、大規模でスケーラブルなシステムによってはない場合があります。</p>
<p>Oracle DBであっても、MySQLのようなOSSデータベースであっても、クラスタやデータセンターで使われる場合を想定して、大規模なシステムで運用するための方法を学ばなければいけません。</p>
<p>また、僕が思うのは、ネットワークやインターネットがデータベースにおいて重要だということです。</p>
<p>僕も全然分かりませんが、MySQLのようなデータベースサーバーを使う場合であっても、ネットワーク上のさまざまな場所にある多くのサーバーと連携して動く、ということが、クラスタやネットワーク環境では重要になるでしょう。</p>
<p>クラスタのデータベースにおいて重要なのは、並列処理による高速化・ハイパフォーマンスと、冗長性の構築です。特に、冗長性の構築においては、サーバーがダウンした場合別のサーバーが代わりを務めるフェイルオーバ、データベースの複製を作るレプリケーション、ネットワーク上のマシンに負荷分散を行うロードバランサー、仮想マシンのリソースを適切にジョブに割り当てるワークロード管理・ジョブ管理などが重要になります。</p>
<p><a href="../network/cluster.html">クラスタ・分散・高信頼システム</a>も参照のこと。</p>
<div class="edit_date">
<p>2023.09.27</p>
</div>

<h1>参考文献</h1>
<h2>データベースについての書籍</h2>
<p>データベースについては以下の書籍が参考になります。上記の内容は以下の書籍を参考に執筆しました。</p>
<ul>
<li><a href="https://www.amazon.co.jp/dp/4295002666/">徹底攻略 応用情報技術者教科書 平成30年度</a></li>
<li><a href="https://www.amazon.co.jp/%E4%BB%A4%E5%92%8C05%E5%B9%B4-%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%EF%BC%86%E3%82%AF%E3%83%AC%E3%83%90%E3%83%BC%E6%96%B9%E5%BC%8F%E3%81%A7%E3%82%88%E3%81%8F%E3%82%8F%E3%81%8B%E3%82%8B-%E6%A0%A2%E6%9C%A8%E5%85%88%E7%94%9F%E3%81%AE%E5%9F%BA%E6%9C%AC%E6%83%85%E5%A0%B1%E6%8A%80%E8%A1%93%E8%80%85%E6%95%99%E5%AE%A4-%E6%83%85%E5%A0%B1%E5%87%A6%E7%90%86%E6%8A%80%E8%A1%93%E8%80%85%E8%A9%A6%E9%A8%93-%E6%A0%A2%E6%9C%A8/dp/4297131307">平成18年度 イメージ&クレバー方式でよくわかる栢木先生の基本情報技術者教室 (情報処理技術者試験)</a></li>
<li><a href="https://www.amazon.co.jp/%E7%9C%9F%E5%9B%B3%E8%A7%A3-%E5%9F%BA%E6%9C%AC%E6%83%85%E5%A0%B1%E6%8A%80%E8%A1%93%E8%80%85-2011%E5%B9%B4%E7%89%88%E2%80%95%E5%88%9D%E6%AD%A9%E3%81%8B%E3%82%89%E5%AD%A6%E3%81%B9%E3%81%A6%E5%90%88%E6%A0%BC%E3%81%A7%E3%81%8D%E3%82%8B-%E7%A6%8F%E5%B6%8B-%E5%AE%8F%E8%A8%93/dp/4532406781">真図解 基本情報技術者 2006年春―初歩から学べて合格できる</a></li>
<li>放送大学「情報学へのとびら ('16)」</li>
<li><a href="https://qiita.com/zd6ir7/items/6568b6c3efc5d6a13865">「トランザクション」とは何か？を超わかりやすく語ってみた！ - Qiita</a></li>
</ul>








</div></div> <!--page-->










<script type="text/javascript" src="../../js/jquery.toc.js"></script>
<script type="text/javascript" src="../../js/script.js"></script>
<script type="text/javascript" src="../../js/scriptfortoc.js"></script>
</body>
</html>