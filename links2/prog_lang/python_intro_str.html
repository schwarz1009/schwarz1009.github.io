<!DOCTYPE html>
<html dir="ltr" lang="ja">
    <head>
        <title>Python入門（５．文字列） - from Assy</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="keywords" content="Assy,アッシー,詩,小説,物語,歴史,政治,経済,コンピュータ,パソコン,Linux,エッセイ,散文,哲学">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="../../css/style.css">
        <link rel="stylesheet" href="../../css/prettify.css" type="text/css">


<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="manifest" href="/favicons/manifest.json">
<link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5">
<meta name="theme-color" content="#ffffff">

    </head>
    <body>
<div class="page">
<script type="text/javascript" src="../../js/jquery.min.js"></script>
<script type="text/javascript" src="../../js/script_smartmenus.js"></script>
<script type="text/javascript" src="../../js/links2.js"></script>

<p><a href="index.html">プログラミング言語の世界観に戻る</a></p>
<div class="sidebar">
<iframe src="../../menus/prog_lang_ll_menu.html" class="sideiframe"></iframe>
</div>
<h1>Python入門（５．文字列）</h1>
<p>Python入門（５．文字列）です。</p>

<h2>関連ページ</h2>
<ul class="defaultlist list6 menu_list">
<li><a href="python_intro.html">Python入門</a></li>
<ul>
<li><a href="python_intro_basic.html">１．基本</a></li>
<li><a href="python_intro_flow.html">２．制御フロー</a></li>
<li><a href="python_intro_oop.html">３．オブジェクト指向</a></li>
<li><a href="python_intro_data.html">４．データ構造</a></li>
<li><b>５．文字列</b></li>
<li><a href="python_intro_file.html">６．ファイル</a></li>
<li><a href="python_intro_functional.html">７．関数型言語の機能</a></li>
<li><a href="python_intro_others.html">８．その他</a></li>
<li><a href="python_intro_advanced.html">９．応用・モジュール</a></li>
</ul>
</ul>

<div id="toc"></div>
<div class="page_links">


<h1>文字列の関数と機能</h1>
<h2>文字列の結合</h2>
<p>文字列同士は+で結合できる（int型の+とは目的も機能も使い方も違う）。</p>
<pre class="prettyprint">
print("Hog" + "e")
</pre>
<p>printでは自動的に改行が付加されるが、付加したくない時はend=''という引数を追加する。</p>
<pre class="prettyprint">
print("Hog", end='')
print("e")
</pre>
<p>文字列は、ダブルクオーテーション（"）で囲っても、シングルクオーテーション（'）で囲ってもいい。その代わり、"で囲った文字列は"で終わる必要がある。'～'の中には"を、"～"の中には'を含めることができるが、"～"の中に"を入れたい場合は\"のようにバックスラッシュでエスケープする必要がある。また、以下に示すようにr文字列やf文字列を使って\や"などの含めた文字列や内部で関数名を展開する文字列を書くこともできるし、複数行に渡って文字列を表すにはトリプルクォートを使う。</p>

<h2>format関数</h2>
<p>Pythonで変数の中身を表示するためには、フォーマット整形関数であるformat()を使用する。</p>
<pre class="prettyprint">
x = 3
y = 10
print('{0}と{1}の平均は{2}'.format(x, y, (x+y)/2))
</pre>
<p>以下のサイトを参考に執筆・引用しました。</p>
<ul>
<li><a href="https://www.atmarkit.co.jp/ait/articles/1904/23/news015.html">［Python入門］文字列の書式指定 (1/4)：Python入門 - ＠IT</a></li>
<li><a href="https://qiita.com/Morio/items/b79ead5f881e6551d9e1">【Python入門】format関数で文字列の書き方 - Qiita</a></li>
</ul>

<h2>format関数の詳細</h2>
<p>format()関数は、色んなことができる。通常、順番通りにひとつひとつ変数を出力するには、</p>
<pre class="prettyprint">
x = 3
y = 10
print('{}と{}の平均は{}'.format(x, y, (x+y)/2))
</pre>
<p>とする。これに対して、数値を指定することもできる。</p>
<pre class="prettyprint">
x = 3
y = 10
print('{0}と{1}の平均は{2}'.format(x, y, (x+y)/2))
</pre>
<p>同じ変数を使いまわすような場合は、数値を同じにする。</p>
<pre class="prettyprint">
x = 3
y = 10
print('{0}+{1}={2}\n{0}-{1}={3}\n{0}*{1}={4}\n{0}/{1}={5}'.format(x, y, x+y, x-y, x*y, x/y))
</pre>
<p>変数に名前をつけることもできる。</p>
<pre class="prettyprint">
animals = {'dog': '犬', 'cat': '猫'}
print('dogは{dog}で、catは{cat}ですよ。'.format(dog=animals['dog'], cat=animals['cat']))
</pre>
<p>辞書を使う場合は、数値0に対してキーを設定するような使い方もできる。</p>
<pre class="prettyprint">
animals = {'dog': '犬', 'cat': '猫'}
print('dogは{0[dog]}で、catは{0[cat]}ですよ。'.format(animals))
</pre>
<p>また、左揃え・中央揃え・右揃えとか、最低の文字幅を指定して空いたスペースを空白で埋めるなどといった使い方もできる。+や-などの符号を数値につけて+の場合はひとつの空白で表現するなどといったこともできる。</p>
<pre class="prettyprint">
print('{x:&gt;6}と{y:&gt;6}の平均は{result:&gt;6}'.format(x=x, y=y, result=(x+y)/2))
</pre>
<p>ここでは、最低文字数が6で、右揃え（&gt;が右揃え、&lt;が左揃えを意味する）にしている。</p>
<p>また、format()関数で書式指定するのは比較的新しいやり方である。以前のやり方である%を使った書式指定を目にすることもある。</p>
<p>詳しくは以下を参照のこと。</p>
<ul>
<li><a href="https://www.atmarkit.co.jp/ait/articles/1904/23/news015.html">［Python入門］文字列の書式指定 (1/4)：Python入門 - ＠IT</a></li>
</ul>

<h2>f文字列とr文字列</h2>
<p>また、上のformat()と同じ用途に使えるものとして、f文字列がある。f文字列では、{}の中の変数が展開される。</p>
<pre class="prettyprint">
x = 3
y = 10
print(f'{x}と{y}の平均は{(x+y)/2}')
</pre>
<p>また、'（シングルクォート）の中では"（ダブルクォート）をそのまま書け、ダブルクォートの中ではシングルクォートをそのまま書けるが、シングルクォートの中で、シングルクォートを使ったり、ダブルクォートの中でダブルクォートを使ったりするためには、\（バックスラッシュ）をつける。</p>
<p>ただし、Windowsのディレクトリパスなどで、バックスラッシュをそのまま使いたい場合は、raw文字列（r文字列）を使うと便利である。</p>
<pre class="prettyprint">
path_windows = r'C:\Windows'
print(path_windows)
</pre>
<p>r文字列の中では、エスケープされた文字が付加的な意味を持たず、ただの文字として扱われる。</p>

<h2>トリプルクォートとdocstring</h2>
<p>また、ヒアドキュメントのように改行を含めた文字列を表現したい場合は、トリプルクォートと呼ばれる機能が使える。</p>
<pre class="prettyprint">
help_msg = '''
このプログラムの使い方は、
オプション1 : 説明1
オプション2 : 説明2
です。
'''
print(help_msg)
</pre>
<p>Pythonで自分以外のたくさんのユーザーが使うような関数を定義する場合、関数に説明をつける時に、docstringと呼ばれるドキュメントを作ることもある。この時、トリプルクォートを使う。</p>
<ul>
<li><a href="https://www.atmarkit.co.jp/ait/articles/1912/06/news025.html">［Python入門］docstringの書き方：Python入門 - ＠IT</a></li>
</ul>
<p>後日注記：トリプルクォートは複数行の文字列に使うほか、複数行に渡るコメントを表現するためにも用いる（一行コメントは#を使う）。</p>

<h2>文字列を操作する関数</h2>
<p>文字列を操作する関数としては、よく使うものとして、</p>
<table class="some_tables">
<tr><th class="min60">関数</th><th>説明</th></tr>
<tr><td>len()</td><td>文字数を求める</td></tr>
<tr><td>in演算子</td><td>文字列の中に文字が含まれてるかどうかを調べる</td></tr>
<tr><td>find()<br>rfind()<br>index()<br>rindex()</td><td>文字列の含まれている場所を求める</td></tr>
<tr><td>split()</td><td>文字列を分割する</td></tr>
<tr><td>join()</td><td>リストをひとつの文字列に結合する</td></tr>
<tr><td>strip()<br>lstrip()<br>rstrip()</td><td>空白文字を削除する</td></tr>
<tr><td>replace()</td><td>文字列を置換する</td></tr>
</table>
<p>などがある。Pythonでは文字列を変更することはできないため、「元の文字列をベースにして新しい文字列を作成する」といった動作になる。</p>
<p>詳しくは以下を参照のこと。</p>
<ul>
<li><a href="https://www.atmarkit.co.jp/ait/articles/1904/19/news027.html">［Python入門］文字列の操作 (1/4)：Python入門 - ＠IT</a></li>
</ul>

<h2>日本語文字コードを使う</h2>
<p>PythonスクリプトでUTF-8を使うためには、行頭の部分を以下のように記述する。</p>
<pre class="prettyprint">
#!/usr/bin/env python
# -*- coding: utf-8 -*-
</pre>
<p>（<a href="http://osksn2.hep.sci.osaka-u.ac.jp/~taku/osx/python/encoding.html">Python でUTF-8, shift_jis, euc_jpなど日本語を使う方法 - Taku Yamanaka's Home Page</a>より引用。）</p>

<h2>Pythonで正規表現</h2>
<p>Pythonで正規表現を使うには、まずreモジュールをimportする。</p>
<pre class="prettyprint">
import re
</pre>
<p>正規表現をコンパイルしてマッチさせるには、以下のようにする。</p>
<pre class="prettyprint">
p = re.compile('ho*ge')
m = p.match('hoooge fuuga')
print(m.group())
</pre>
<p>re.match()でそのままマッチさせることもできるが、コンパイルして再利用したほうが何度も同じパターンを使う場合に効率的である。</p>
<p>p.match()はマッチしなかった場合はNone、マッチした場合はMatchオブジェクトを返す。Matchオブジェクトは、group()でマッチした文字列、start()でマッチした開始地点、end()でマッチした終了地点、span()でstartとend両方を含むタプルを得られる。</p>
<p>また、置換はp.sub()で行える。引数countを指定すると、その回数置換する（1ならば1回）。また、countが0あるいは指定されなかった場合はすべてのマッチした部分が置換される。</p>
<p>詳しくは以下が参考になる。</p>
<ul>
<li><a href="https://qiita.com/luohao0404/items/7135b2b96f9b0b196bf3">分かりやすいpythonの正規表現の例 - Qiita</a></li>
<li><a href="https://docs.python.org/ja/3/library/re.html">re --- 正規表現操作</a></li>
<li><a href="https://docs.python.org/ja/3/howto/regex.html">正規表現 HOWTO</a></li>
</ul>
<p><a href="../linux/regex.html">正規表現</a>も参照のこと。</p>






</div></div> <!--page-->










<script type="text/javascript" src="../../js/jquery.toc.js"></script>
<script type="text/javascript" src="../../js/script.js"></script>
<script type="text/javascript" src="../../js/scriptfortoc.js"></script>
<script type="text/javascript" src="../../js/prettify.js"></script>
<script>prettyPrint();</script>
</body>
</html>