<!DOCTYPE html>
<html dir="ltr" lang="ja">
    <head>
        <title>関数の世界観 - from Assy</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="keywords" content="Assy,アッシー,詩,小説,物語,歴史,政治,経済,コンピュータ,パソコン,Linux,エッセイ,散文,哲学">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="../../css/style.css">
        <link rel="stylesheet" href="../../css/prettify.css" type="text/css">


<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="manifest" href="/favicons/manifest.json">
<link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5">
<meta name="theme-color" content="#ffffff">

    </head>
    <body>
<div class="page">
<script type="text/javascript" src="../../js/jquery.min.js"></script>
<script type="text/javascript" src="../../js/script_smartmenus.js"></script>
<script type="text/javascript" src="../../js/links2.js"></script>

<p><a href="index.html">プログラミング言語の世界観に戻る</a></p>
<div class="sidebar">
<iframe src="../../menus/prog_lang_skill_menu.html" class="sideiframe"></iframe>
</div>
<h1>関数の世界観</h1>
<p>関数に関する世界観です。</p>
<div id="toc"></div>
<div class="page_links">

<h1>関数</h1>
<h2>関数こそ、プログラミングのすべて</h2>
<p>僕は、<a href="https://www.amazon.co.jp/ANSI-Common-Lisp-%E3%82%B9%E3%82%BF%E3%83%B3%E3%83%80%E3%83%BC%E3%83%89%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88-%E3%82%B0%E3%83%AC%E3%82%A2%E3%83%A0/dp/4894714337">Common Lispの本</a>を読んでいて、ひとつ、思ったことがあります。</p>
<p>それは、「プログラミングとは関数である」ということです。</p>
<p>この関数とは、単にサブルーチンのように、処理を部分化するだけではありません。「値を与えて呼び出し、値を返り値として返す」ということ、それこそがプログラミングの本質なのです。</p>
<p>関数には、僕はポインタが必要だと思います。なぜなら、関数との間で「勝手口」を共有するために、ポインタが必要となるからです。</p>
<p>勝手口とは、すなわち、「その世界と別の世界を繋ぐ糸電話」のようなものです。そして、これはまさしく「関数に引数を与え、returnで値を返す」ということです。</p>
<p>たとえば、オブジェクト指向のクラスの持つメソッドには、オブジェクトを返すメソッドがあります。たとえば、TimeDateクラスがあったとして、これに今日の日付を返すgetToday()メソッドがあったとします。数値を返す場合もあると思いますが、一般的には日付を格納するDayクラス（Day型）のオブジェクトとして、getToday()メソッドは今日を示すDay型のオブジェクトを返します。</p>
<p>これが、たとえば以下のように、</p>
<pre class="prettyprint">
TimeDate td = new TimeDate();
Day today = td.getToday();
System.out.println(today.toString());
</pre>
<p>のように、どんどん「.」で繋がって、オブジェクト指向は実現します。</p>
<p>ですが、これもまた関数です。ポインタとも同じです。なぜなら、「関数的返り値と同様の、メッセージングのためのオブジェクトがあるだけにすぎない」からです。</p>
<p>オブジェクト指向は、メッセージのためにオブジェクトをあっちやらこっちやらに渡しているだけにすぎず、これは参照型でありポインタでありますが、「関数に引数を与え、returnで値を返す」ということと、まったく同じことをオブジェクト指向は行っています。</p>
<p>また、「型」とは、要するにメッセージの媒体の「プロトコル」であると言えます。型は、「どのようなオブジェクトが返ってきたにせよ、そのオブジェクトを操作するための共通の決まり事を約束する」ということです。なので、Day型のオブジェクトが返り値として返ってくるということが最初から分かっているから、Day型のオブジェクトを「今日」というメッセージの伝達に使うことができるのです。</p>
<p>また、変数と関数を別々のものであると考える必要はないかもしれません。変数は「静的数」、すなわち、参照する際にその実体が物理的に存在するものであり、関数は「動的数」、すなわち、参照する際に動的に作り出されて実体が仮想的に存在するものであると考えられます。</p>
<p>ここで言えるのは、「関数とは数の仮想化である」ということです。関数は、実行してはじめて動的に作り出される変数であると言えます。なので、たとえば、</p>
<pre class="prettyprint">
var x = 10;
</pre>
<p>が変数だったとしたら、</p>
<pre class="prettyprint">
var y = getTen();
</pre>
<p>が関数です。あるいは、変数をHTMLであり、関数をCGIであるとも言えます。もし、変数しかなかったとしたら、動的に作り出したくなった場合に困るかもしれませんが、関数しかなかったとしても、おそらく変数を「静的な関数」だと思えば、それは成り立つでしょう。</p>
<p>あるいは、変数を「実体がある」、関数を「実体がない」とすれば、変数は「データを数値で指定する」ということであり、関数は「データを数式で指定する」ということであるとも言えます。たとえば、</p>
<pre class="prettyprint">
var x = [0, 2, 4, 6]
</pre>
<p>が変数的な配列だとしたら、</p>
<pre class="prettyprint">
var y = [i * 2 for i in range(4)]
</pre>
<p>が関数的な配列であると言えます。</p>
<p>何が言いたいかと言えば、結局すべては関数であるということです。あるいは、メッセージングだと言っても良いでしょう。プログラミングは、「呼び出して値が返る」ということ、それによって「世界と世界がメッセージをやり取りする」ということなのです。</p>
<p>また、ほかにプログラミングの要素について重要なものがあるとしたら、それは無名関数です。ブロックとか、ラムダ式とか、関数オブジェクトとか、時には関数ポインタとか呼ばれることもあるそれです。ここでは、関数に変数を与えるだけではなく、「関数に対して関数を与える」ということができます。ですが、関数と変数が静的あるいは動的しか違わないもの、あるいは具体的な値を指定するか動的に作り出されるコードを指定するかということが分かっていれば、これはまさしく「世界に対してメッセージとして世界を与えるもの」であると言えます。</p>
<p>そう、すべては、「世界と世界のメッセージのやり取り」です。では、世界とは何でしょうか。世界とは、「それぞれがやらせたいこと」にほかなりません。それぞれがパソコンにやらせたいこと、すなわち「方法や手順」の中で、さらに「具体的な値」や「追加的な方法な手順」を与える、その「与えるということそのものがメッセージング」ということなのです。</p>
<p>そう、関数こそ、プログラミングのすべてです。それはメッセージングであり、「このようにしろと決まっている手順の中で、その中のさまざまな具体的な手順をさまざまな状況や場合に応じて書き換えること」です。これこそ、「関数とは何か」という問題についての、正しい定義であると言えるでしょう。</p>
<p>if文やfor文を使ったアルゴリズム、あるいはデータ構造は、その状況や手順を成り立たせるための「決まり事」にすぎません。ですが、プログラマのメインの仕事は、その「決まり事を書くこと」です。関数が方法や手順であったとしたら、if文やfor文はその方法や手順を書くための「用語集」であり、スタックやリストなどのデータ構造は「詳細な言葉の定義」であり、そして実際のアルゴリズムは「言語化」であると言えます。そのような言語の中で、具体的な値すなわち「意味」を与えるのか、それとも値を仮想化した「論理」を与えるのかが違うだけにすぎません。そして、プログラマの仕事とは、それらすべてを集約したうえで、ひとつの世界、すなわち「太陽系」を作り出すことなのです。</p>

<h2>関数とは、プログラマブルに操作できるということ</h2>
<p>ここで僕が「関数」という言葉を使って何を表現したいのかというと、それは「プログラマブルに操作できる」ということです。</p>
<p>たとえば、青い画面を表示するだけなら、テレビにだってできます。パソコンを使わなくても、決まりきった静止画や動画をテレビのようなモニターを映すことはできます。CPUは必要ありません。</p>
<p>ですが、そこにCPUとソフトウェアが繋がることで、たとえば「マウスを上にやればメニューがでて、そのメニューをクリックすると青い画面が赤い画面やオレンジの画面などに変わる」といった、処理ができます。</p>
<p>これは、ユーザーが明示的に操作した場合だけではありません。あらかじめ決められたデータフォーマットのデータをCPUを内蔵するモニターに与えて、その中でプログラムを処理することで、ソフトウェアとデータファイルを使ってモニターに表示する内容を変えることができます。インターネットなどのネットワークに繋がっていれば、そのデータファイルがローカルにある必要はなく、先ほどのマウスを上にやるとでてくるメニューの中にURLを入力すれば、URLのアドレスに存在するページにアクセスしてそれを表示することだってできるでしょう。</p>
<p>このように、コンピュータとは「プログラマブルに動作を変えられる」ということです。そして、これこそが「関数」の本質です。関数は、データを単にあっちからこっちへと移すだけではなく、その移す過程において「内容を変更する」ことや「内容を計算して作り出す」ことができます。そう、関数とはそのためにある「メッセージ記述装置」なのです。</p>

<h2>全部関数でやればいい</h2>
<p>実際のところ、プログラミングはそんなに難しいものではありません。</p>
<p>なぜなら、「全部関数でやればいい」というだけだからです。</p>
<p>ボタンやメニューの表示、ウィンドウの表示、Webブラウザにおける移動や更新、ブックマークの管理と情報の参照など、すべて、関数で行い、関数が返すデータを参照しながら作ればいいのです。</p>
<p>ですが、場合によっては、関数と関数の間でデータを共有したい時もあります。関数にデータを渡して返り値からデータを受け取る方法もありますが、関数の中からデータを参照・変更する場合、あるいは関数と関数の間で共通のデータを共有する場合には、オブジェクト指向の考え方を使います。</p>
<p>関数とオブジェクト指向の考え方を組み合わせて、関数にオブジェクトを渡す、あるいは関数からオブジェクトを生成して返すという方法もあります。</p>
<p>ですが、基本的にプログラミングとは関数です。関数によってデータを参照・編集すること、関数にデータを渡し、関数から返ってきたデータを適切に扱うこと、これがプログラミングであると言えます。</p>

<h1>関連ページ</h1>
<h2>関数型プログラミング</h2>
<p><a href="functional_programming.html">関数型プログラミング</a>も参照のこと。</p>

<h2>Smalltalk</h2>
<p><a href="smalltalk.html">Smalltalk</a>も参照のこと。</p>

</div></div> <!--page-->










<script type="text/javascript" src="../../js/jquery.toc.js"></script>
<script type="text/javascript" src="../../js/script.js"></script>
<script type="text/javascript" src="../../js/scriptfortoc.js"></script>
<script type="text/javascript" src="../../js/prettify.js"></script>
<script>prettyPrint();</script>
</body>
</html>